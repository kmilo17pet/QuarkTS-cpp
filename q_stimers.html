<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="QuarkTS++ OS" />
<meta property="og:image" content="https://user-images.githubusercontent.com/11412210/235049017-242f1c64-52ef-46db-8008-2c3d8a578320.png" />
<meta property="og:description" content="An open-source OS for small embedded applications" />
<meta property="og:url" content="https://github.com/kmilo17pet/QuarkTS-cpp" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>OS: Timers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/kmilo17pet/QuarkTS-cpp" class="github-corner" title="View source on GitHub" target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="quarktslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   &#160;<span id="projectnumber">v1.5.9</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('q_stimers.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Timers</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#q_stimers_overview">Overview</a></li>
<li class="level1"><a href="#q_stimerusage">Using a Timer</a></li>
<li class="level1"><a href="#q_stimerexample">Timer example</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="q_stimers_overview"></a>
Overview</h1>
<p>The QuarkTS++ Timers are an essential extension as they allow for accurate and efficient timekeeping without blocking tasks. Using Timers enables the embedded application to perform other critical tasks while the timer is running in the background. Timers also provide flexibility in the event that the timer needs to be paused, restarted, or adjusted on the fly. This can be particularly useful in applications that require dynamic timing or have unpredictable event intervals.</p>
<p>The Non-blocking design of the Timer is particularly important in cooperative scheduling because the tasks and operations of the OS are dependent on the cooperation of other tasks. Blocking timers can be problematic in a cooperative model because they halt the execution of the task, preventing other tasks from running. This can cause delays, missed deadlines, and other performance issues.</p>
<p>The timer implementation does not access resources from the interrupt context, does not consume any significant processing time unless a timer has actually expired, does not add any processing overhead to the sys-tick interrupt, and does not walk any other data structures. The timer service just takes the value of the existing kernel clock source for reference \( t_{sys}\) , allowing timer functionality to be added to an application with minimal impact.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>timers++</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.2,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2023-04-21T05:22:48.231Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36\&quot; etag=\&quot;Fdhz2bzOmpGiuD6lzx_b\&quot; version=\&quot;21.2.1\&quot; type=\&quot;google\&quot;&gt;\n  &lt;diagram name=\&quot;Página-1\&quot; id=\&quot;XHreDaHMVo4Np0G45lwU\&quot;&gt;\n    &lt;mxGraphModel dx=\&quot;1077\&quot; dy=\&quot;19\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;1169\&quot; pageHeight=\&quot;827\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;\n      &lt;root&gt;\n        &lt;mxCell id=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-1\&quot; value=\&quot;elapsed E&amp;lt;sub style=&amp;quot;font-size: 13px;&amp;quot;&amp;gt;t&amp;lt;/sub&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1;fontFamily=Helvetica;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;358.50000000000006\&quot; y=\&quot;1125.34\&quot; width=\&quot;85.37\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-2\&quot; value=\&quot;( t&amp;lt;sub&amp;gt;sys&amp;amp;nbsp;&amp;lt;/sub&amp;gt;- Xt&amp;lt;sub&amp;gt;i&amp;amp;nbsp;&amp;lt;/sub&amp;gt;) ≥ X&amp;lt;sub&amp;gt;Tx&amp;lt;/sub&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;404.3\&quot; y=\&quot;1274.84\&quot; width=\&quot;147.5\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-3\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;281.4300000000001\&quot; y=\&quot;1205.7900000000002\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;657.3\&quot; y=\&quot;1206.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-4\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;282.3\&quot; y=\&quot;1204.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;282.3\&quot; y=\&quot;1189.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-5\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;318.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;318.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-6\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;357.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;357.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-7\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;397.3\&quot; y=\&quot;1204.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;397.3\&quot; y=\&quot;1189.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-8\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;437.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;437.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-9\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;477.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;477.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-10\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;517.3\&quot; y=\&quot;1204.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;517.3\&quot; y=\&quot;1189.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-11\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;557.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;557.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-12\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;597.3\&quot; y=\&quot;1205.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;597.3\&quot; y=\&quot;1190.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-13\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=1;shadow=0;fontSize=13;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;636.3\&quot; y=\&quot;1204.72\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;636.3\&quot; y=\&quot;1189.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-14\&quot; value=\&quot;&amp;lt;div style=&amp;quot;text-align: center;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;background-color: initial;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;...&amp;lt;/b&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;text;whiteSpace=wrap;html=1;fontSize=13;fontColor=#808080;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;347.3\&quot; y=\&quot;1199.72\&quot; width=\&quot;20\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-15\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;fillStyle=solid;fontSize=13;fontColor=#808080;strokeColor=#999999;strokeWidth=2;fillColor=#E6E6E6;rotation=90;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;387.58\&quot; y=\&quot;1080\&quot; width=\&quot;20\&quot; height=\&quot;156.8\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-16\&quot; value=\&quot;&amp;lt;div style=&amp;quot;text-align: center;&amp;quot;&amp;gt;&amp;lt;span style=&amp;quot;background-color: initial;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;t&amp;lt;/b&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\&quot; style=\&quot;text;whiteSpace=wrap;html=1;fontSize=13;fontColor=#808080;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;473.68\&quot; y=\&quot;1200.72\&quot; width=\&quot;24.62\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-17\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=2;startArrow=none;startFill=0;endFill=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;317.3\&quot; y=\&quot;1278.1000000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;317.3\&quot; y=\&quot;1249.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-18\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=2;startArrow=none;startFill=0;endFill=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;477.57\&quot; y=\&quot;1266.47\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;477.57\&quot; y=\&quot;1226.47\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-19\&quot; value=\&quot;X expiration\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;440.50000000000006\&quot; y=\&quot;1258.72\&quot; width=\&quot;85.37\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-20\&quot; value=\&quot;X.set(Et)&amp;amp;nbsp;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=10;fontColor=#808080;fontStyle=0;fontFamily=Lucida Console;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;256.00000000000006\&quot; y=\&quot;1084.2199999999998\&quot; width=\&quot;144.68\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-21\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=2;dashed=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;476.6800000000001\&quot; y=\&quot;1179.4700000000005\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;590.3\&quot; y=\&quot;1179.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-22\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=2;startArrow=none;startFill=0;endFill=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;318.63000000000005\&quot; y=\&quot;1109.2199999999998\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;318.63000000000005\&quot; y=\&quot;1150.2199999999998\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-23\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#808080;strokeColor=#808080;strokeWidth=2;labelBackgroundColor=#808080;fillStyle=solid;fillColor=#808080;rotation=-90;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;411.68\&quot; y=\&quot;1158.6499999999999\&quot; width=\&quot;10\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-24\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#808080;strokeColor=#007FFF;strokeWidth=2;labelBackgroundColor=#3399FF;fillStyle=solid;fillColor=#007FFF;rotation=-90;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;452.3\&quot; y=\&quot;1158.6499999999999\&quot; width=\&quot;10\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-25\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#808080;strokeColor=#B3B3B3;strokeWidth=2;labelBackgroundColor=#808080;fillStyle=solid;fillColor=#B3B3B3;rotation=-90;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;333.99000000000007\&quot; y=\&quot;1158.4799999999998\&quot; width=\&quot;10\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-26\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#808080;strokeColor=#999999;strokeWidth=2;labelBackgroundColor=#808080;fillStyle=solid;fillColor=#999999;rotation=-90;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;370.3\&quot; y=\&quot;1158.4799999999998\&quot; width=\&quot;10\&quot; height=\&quot;40\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-27\&quot; value=\&quot;T&amp;lt;sub&amp;gt;X&amp;lt;/sub&amp;gt;&amp;lt;span style=&amp;quot;font-size: 10.8333px;&amp;quot;&amp;gt;=E&amp;lt;sub&amp;gt;t&amp;lt;/sub&amp;gt;&amp;lt;/span&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1;fontFamily=Helvetica;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;293.50000000000006\&quot; y=\&quot;1274.84\&quot; width=\&quot;85.37\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-28\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=1;startArrow=none;startFill=0;endFill=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;316.5599999999999\&quot; y=\&quot;1284.22\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;316.3\&quot; y=\&quot;1309.1000000000001\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-29\&quot; value=\&quot;X\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1;fontFamily=Helvetica;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;297.3\&quot; y=\&quot;1279.97\&quot; width=\&quot;23\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-30\&quot; value=\&quot;t&amp;lt;sub&amp;gt;sys&amp;amp;nbsp;&amp;lt;/sub&amp;gt;(tick)\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;568.6800000000001\&quot; y=\&quot;1206.8\&quot; width=\&quot;147.5\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-31\&quot; value=\&quot;t&amp;lt;sub&amp;gt;0&amp;lt;br&amp;gt;armed&amp;lt;br&amp;gt;&amp;lt;/sub&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;301.8\&quot; y=\&quot;1210.72\&quot; width=\&quot;37.5\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-32\&quot; value=\&quot;t&amp;lt;sub&amp;gt;-1&amp;amp;nbsp;&amp;lt;/sub&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;422.93\&quot; y=\&quot;1200.72\&quot; width=\&quot;39.5\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;vyZwSIN-qtXGtuRVDQ8B-33\&quot; value=\&quot;t&amp;lt;sub&amp;gt;-2&amp;lt;/sub&amp;gt;\&quot; style=\&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillStyle=solid;fontSize=13;fontColor=#808080;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;381.43\&quot; y=\&quot;1201.47\&quot; width=\&quot;39.5\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n      &lt;/root&gt;\n    &lt;/mxGraphModel&gt;\n  &lt;/diagram&gt;\n&lt;/mxfile&gt;\n&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Timers operation</em> </center><p>As illustrated in the figure, the time expiration check is roll-over safe by restricting it, to the only calculation that makes sense for timestamps, \( t_{sys} − X_{T_x} \), that yields a duration namely the amount of time elapsed between the current instant \( t_{sys}\) and the later instant, specifically, the tick taken at the arming instant with <a class="el" href="classq_o_s_1_1timer.html#a3ecd9c9f620be00091a73fbf3c92cebf" title="Set the expiration time for a timer. On success, the timer gets armed immediately.">qOS::timer::set()</a>, \( X_{t_i}\) Thanks to modular arithmetic, both of these are guaranteed to work fine across the clock-source rollover (a 32bit unsigned-counter), at least, as long the delays involved are shorter than <code>49.7</code> days.</p>
<p><b> Features </b></p>
<ul>
<li>Provides a non-blocking equivalent to delay function.</li>
<li>Each Timer encapsulates its own expiration (timeout) time.</li>
<li>Provides elapsed and remaining time methods.</li>
<li>As mentioned before, QuarkTS++ timers uses the same kernel clock source, this means the time-elapsed calculation uses the <a class="el" href="classq_o_s_1_1clock.html#a6363cb8fda1990fbe538297c13f4595a" title="Return the current tick used by the OS.">qOS::clock::getTick()</a> method, therefore, the time resolution has the same value passed when the scheduler has been initialized with <a class="el" href="classq_o_s_1_1core.html#a76bcdcfaba5020967caff19f69f4270a" title="Task Scheduler initialization. This core method is required and must be called once in the applicatio...">qOS::core::init()</a></li>
</ul>
<h1><a class="anchor" id="q_stimerusage"></a>
Using a Timer</h1>
<p>To use timers, the code should follow a specific pattern that deals with the states of this object ( <a class="el" href="classq_o_s_1_1timer.html" title="A non-blocking Timer object.">qOS::timer</a> ). All related methods are designed to be non-blocking, this means there are ideal for use in cooperative environments such as the one provided by the OS itself. To minimize the implementation, this object is intentionally created to behave like a binary object, this implies that it only handles two states, <em>Armed</em> and <em>Disarmed</em>. An <em>Armed</em> timer means that it is already running with a specified preset value and a <em>Disarmed</em> timer is the opposite, which means that it does not have a preset value, so consequently, it is not running at all.</p>
<p>The arming action can be performed with <a class="el" href="classq_o_s_1_1timer.html#a3ecd9c9f620be00091a73fbf3c92cebf" title="Set the expiration time for a timer. On success, the timer gets armed immediately.">qOS::timer::set()</a> or <a class="el" href="classq_o_s_1_1timer.html#acd1dfb38ba34a7a021c28a61795b6f98" title="Non-Blocking timer check with automatic arming.">qOS::timer::freeRun()</a> and disarming with <a class="el" href="classq_o_s_1_1timer.html#ab3a5a79fbf62111e048435d0804aee66" title="Disarms the timer object.">qOS::timer::disarm()</a>. For <a class="el" href="classq_o_s_1_1timer.html#acd1dfb38ba34a7a021c28a61795b6f98" title="Non-Blocking timer check with automatic arming.">qOS::timer::freeRun()</a>, it checks the timer and performs the arming. If disarmed, it gets armed immediately with the specified time. If armed, the time argument is ignored and the method only checks for expiration. When the time expires, the Timer gets armed immediately taking the specified time.</p>
<p>All possible checking actions are also provided for this object, including <a class="el" href="classq_o_s_1_1timer.html#a39902c09df65b24ae8e25c6c8ffb9385" title="Retrieve the elapsed time in epochs.">qOS::timer::elapsed()</a>, <a class="el" href="classq_o_s_1_1timer.html#aff79958773cab990688fcccc7d155e5a" title="Retrieve the remaining time in epochs.">qOS::timer::remaining()</a> and <a class="el" href="classq_o_s_1_1timer.html#aaef5ff5b14bb68c184b70420110424de" title="Non-Blocking timer check.">qOS::timer::expired()</a> , with the last one being the most commonly used for timing applications. Finally, to get the current status of the Timer (check if is <em>Armed</em> or <em>Disarmed</em>) the <a class="el" href="classq_o_s_1_1timer.html#a758dbbec1aeca8c8398403e349555f3b" title="Get the current status of the Timer (Armed or Disarmed)">qOS::timer::status()</a> method should be used.</p>
<h1><a class="anchor" id="q_stimerexample"></a>
Timer example</h1>
<p>The example below shows a simple usage of this object. It is noteworthy that arming is performed once using the <a class="el" href="classq_o_s_1_1event__t.html#acf2072494ae5aa4a3bb387be72756bb6" title="Checks whether the task is running for the first time. Can be used for data initialization purposes.">qOS::event_t::firstCall()</a> flag. This prevents the timer from being re-armed every time the task runs. After the timer expires, it should be disarmed explicitly</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Example_Task( event_t e ) {</div>
<div class="line">    <span class="keyword">static</span> timer timeout;</div>
<div class="line">    <span class="keywordflow">if</span> ( e.firstCall() ) {</div>
<div class="line">        <span class="comment">/*Arming the stimer for  3.5 seg*/</span></div>
<div class="line">        timeout.set( 3.5_sec );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/*non-blocking delay, true when timeout expires*/</span></div>
<div class="line">    <span class="keywordflow">if</span> ( timeout.expired() ) {</div>
<div class="line">        <span class="comment">/* TODO: Code when Timer expires */</span></div>
<div class="line">        timeout.disarm();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">return</span>; <span class="comment">/*Yield*/</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="q_extensions.html">Extensions</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
