<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="QuarkTS++ OS" />
<meta property="og:image" content="https://user-images.githubusercontent.com/11412210/235049017-242f1c64-52ef-46db-8008-2c3d8a578320.png" />
<meta property="og:description" content="An open-source OS for small embedded applications" />
<meta property="og:url" content="https://github.com/kmilo17pet/QuarkTS-cpp" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>OS: Events</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/kmilo17pet/QuarkTS-cpp" class="github-corner" title="View source on GitHub" target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="quarktslogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OS
   &#160;<span id="projectnumber">v1.7.3</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('q_events.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Events</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#eventdata">Retrieving the event data</a>
  </li>
  <li class="level1">
    <a href="#q_event_timeelapsed">The Time-Elapsed event</a>
  </li>
  <li class="level1">
    <a href="#q_asyncevents">Asynchronous events and inter-task communication</a>
    <ul>
      <li class="level2">
        <a href="#q_notifications">Notifications</a>
        <ul>
          <li class="level3">
            <a href="#q_simplenot">Simple Notifications</a>
          </li>
          <li class="level3">
            <a href="#q_queuednot">Queued Notifications</a>
          </li>
          <li class="level3">
            <a href="#q_notificationsend">Sending notifications</a>
          </li>
          <li class="level3">
            <a href="#qnotspread">Spread a notification</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#q_queues">Queues</a>
        <ul>
          <li class="level3">
            <a href="#q_queuesetup">Setting up a queue</a>
          </li>
          <li class="level3">
            <a href="#q_attachqueue">Attach a queue to a task</a>
          </li>
          <li class="level3">
            <a href="#q_queueexample">A queue example</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#qeventflags">Event Flags</a>
        <ul>
          <li class="level3">
            <a href="#q_eventflagsexample">Using the task Event-flags</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="eventdata"></a>
Retrieving the event data</h1>
<p>In the QuarkTS++ OS, tasks can be triggered from multiple event sources including time-elapsed, notifications, queues and event-flags. This can lead to several situations that must be handled by the application writer from the task context, for example:</p>
<ul>
<li>What is the event source that triggers the task execution?</li>
<li>How to get the event-associated data?</li>
<li>What is the task execution status?</li>
</ul>
<p>The OS provides a simple approach for this, a class with all the regarding information of the task execution. This class, that is already defined in the callback function as the <a class="el" href="classq_o_s_1_1event__t.html">qOS::event_t</a> argument, is filled by the kernel dispatcher, so the application writer only needs to read the fields inside.</p>
<p>This class has the following attributes and methods: </p><div class="fragment"><div class="line"><span class="keyword">class </span>event_t {</div>
<div class="line">    trigger getTrigger( <span class="keywordtype">void</span> );</div>
<div class="line">    <span class="keywordtype">void</span> *TaskData;</div>
<div class="line">    <span class="keywordtype">void</span> *EventData;</div>
<div class="line">    <span class="keywordtype">bool</span> firstCall( <span class="keywordtype">void</span> );</div>
<div class="line">    <span class="keywordtype">bool</span> firstIteration( <span class="keywordtype">void</span> );</div>
<div class="line">    <span class="keywordtype">bool</span> LastIteration( <span class="keywordtype">void</span> );</div>
<div class="line">    clock_t startDelay( <span class="keywordtype">void</span> );</div>
<div class="line">    task&amp; self( <span class="keywordtype">void</span> );</div>
<div class="line">};</div>
</div><!-- fragment --><p>Please review the <a class="el" href="classq_o_s_1_1event__t.html">qOS::event_t</a> class reference for more details.</p>
<h1><a class="anchor" id="q_event_timeelapsed"></a>
The Time-Elapsed event</h1>
<p>Running tasks at pre-determined rates is desirable in many situations, like sensory data acquisition, low-level servoing, control loops, action planning and system monitoring. As previously explained in <a class="el" href="q_foundations.html#q_addtasks">Adding tasks to the scheme</a>, you can schedule tasks at any interval your design demands, at least, if the time specification is lower than the scheduler tick. When an application consists of several periodic tasks with individual timing constraints, a few points must be taken:</p>
<ul>
<li>When the time interval of a certain task has elapsed, the scheduler triggers the <code>byTimeElapsed</code> event that put the task in a <code>READY</code> state (see figure below).</li>
<li>If a task has a finite number of iterations, the scheduler will disable the task when the number of iterations reaches the programmed value.</li>
<li>Tasks always have an inherent time lag that can be noticed even more, when the programmed time interval is too low (see figure below). In a real-time context, it is important to reduce this time lag or jitter, to an acceptable level for the application.</li>
</ul>
<dl class="section remark"><dt>Remarks</dt><dd>QuarkTS++ uses the TTA approach to trigger time-elapsed events as explained here <a class="el" href="q_foundations.html#q_timmingapproach">Timing Approach</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>QuarkTS++ can generally meet a time deadline if you use lightweight code in the callbacks and there is a reduced pool of pending tasks, so it can be considered a soft real-time scheduler, however, it cannot meet a deadline deterministically like a hard real-time OS.</dd></dl>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>timeelapsed</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.45,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-18T13:35:18.615Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;EeRctC5N0PFVppZPymKI\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;oOqhLhwujFYqv80jWMrG\&quot; name=\&quot;Página-1\&quot;&gt;7Vtdk6I4FP01Vs0+jAUJCD6OdjuzVTtbU9sPO7NvaUgr1UisEFvdX783GAQSFHT9aLvQrmpzQy7knpObyxF7eDxff+VkMfvOQhr3kBWue/ihh5CNbRf+SctGWWzkby1THoXKVhieon+pMlrKuoxCmlYOFIzFIlpUjQFLEhqIio1wzlbVw15YXD3rgkypYXgKSGxa/45CMcunMRgWHd9oNJ2pU/vI23bMSX6wmkk6IyFblUz4sYfHnDGx/TRfj2kso5fHZTtusqd3d2GcJqLNgAfy++L75B80HK2p+9NZjuif6Wfl5Y3ESzVhdbFik0eAz9j8eQlhHK1mkaBPCxLInhUADraZmMfQsuHjC0uEAhDQw6NUcPZKxyxmPPOEfUu+dz15PJEcG8Vx6cjHgXyDXV0e5YKu987b3kUTeEjZnAq+gUPyAUhxUFEQYwXIqsAzx2hWQjK3EcWg6c5zEWT4oOJ8RMxRc8xpEn6R5IVWEJM0jYJqqDlbJiGVJ6kNtGV5k8lE9uSck4cFS/6WjbFrIdheBA2N9dAY6FIg3ZpA5jZOYyKit6r7uuiqM/xgEZx4h6Ovwzjse7ZVvJyqw5QteUCVj/Ky0Nya9DjsVxA+pcLwmzFhF5PTyYGPIkfCEjCOQpLOdsiWaCLtP4gQlCeZBVm4FvoqnUrr2IMmoM83P2Vf382bv9QJssbDWg3ctjb7WLlb/m2ZBqk+C3ZT/roVI21cpY7rWKdx0PErfpBnXZVzTpeQToO/CptjnQi/PTQc9UsJyEJXZYP7PtlQyXHvnhraitY3FTQ4jSmuvlnpGefC3Bg0c+Puy0VtMeLhjctFz4i5iOb0MxB0kdKeZBLO4kffqAK9DAcEQhjBVWVDOYrKROJoKmuFAHxRsI9kLCO4HfqiOuZRGErfoxSAjZLpH/RFBsApLH+pmEgTg+EvcbbEZzCQgofRQpIzC5I7gj8I21hWFi5c7RjadtGGP3k4F2OWwARIlCFISSpWNBVZnhFEkOdsrlY5n+T8qmOTtE/IPIolwN9o/EblBPdkrQrpCsL6Z+Kab/e1BT0w2ebiGrYN84Fn55v/PvP/e0/5yNI38fOkfMPvlVP+0KBDTKZm1q8g3pT5q9l7PH50MzpoK3b7Okgg6elJXUXKYjmR/eu7cUVnTeXNOsPy3gvdrbaSXFQr7yUkfQULZPj4mQSv/w/Yw0Dpu89xOO1L5QVgFTyH58nQCDVD6F0VQlOxA0g4ZC6WSBwBLrlxF2VBSAMOWybtKoN7qgygNNCr0HzDLzFv4F21MrBN5VKlD1mRljj3aUF5xMLfOs7dE+dq9Iwazl25GrWPE0S7cjRPILqmNDhRnMKu4eiG4pTdQqu8dwXCiLh767LRlAQ7CeKDJH3s6BKEg9pJEPhidDNVxq7E/YDM84w0V1NueFcucU21tSs3WpQbeKCB6R2sEloXH5pbF0pS5A+LlyaqXbr6MLXRTgxru9xNKG9c1ZjKZieGHYbQb4bwqmIYMvXMLlu3yNaOdofh6gi1/j7aNhzd8OYQmdpop099nILRlDRsI/3Uq1OXSj+dHvqR+bY3S97qxhh1D4fefu/Us9DJD302KrSX3i2Pe+yzY9NVKrGTHyFuKukuzSZTI04DYMoSqARDk0hUBLuYbLrN8J42Q9+q0As7bh+1/HLQ6XvHy3XQLH4atSVp8Qsz/Pgf&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Inherent time lag</em> </center><ul>
<li>The most significant delay times are produced inside the callbacks. As mentioned before, use short efficient callback methods written for cooperative scheduling.</li>
<li>If two tasks have the same time interval, the scheduler executes first, the task with the highest priority value (see figure below).</li>
</ul>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>prioschedexample</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.45,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-18T13:54:32.313Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;sqcTudeh-RC4iZqWvrwE\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;lSolJ4cWtxMTfHfqADTA\&quot; name=\&quot;Página-1\&quot;&gt;7Zxtb6s2FIB/TaTtwyK/QAgfb3KbddruNO1Wuvfb5IIbWAmOiNu099fPBhNeTGlhMU0lt5Uaju3j4PP42D4Yz/B69/RrRvbRFxbSZIZA+DTDn2cIQQxd8U9KngsJBrAQbLM4VJkqwdf4B1VCoKQPcUgPjYycsYTH+6YwYGlKA96QkSxjx2a2O5Y0a92TLdUEXwOS6NJvccgjJYULv0q4pvE2UlUvkVck7EiZWd3JISIhO9ZE+GqG1xljvPi0e1rTRDZe2S5Fuc0LqacvltGUv6UA+s1Z/u7Dfz9/D27u2Zd//ry+/faL0vJIkgd1w+rL8ueyBWgafpINKa5SlgrhKuK7RFxB8TFjD2lIZQ1AXB14xu7pmiUsy8viJZC/MqW8eXkRPGSPeRl4KlO2rWiVlahwEyeJylx8HxpqZqruG55aU2BI2Y7y7FlkOVb2cpUNopqlSllGE8Ljx6Z6orDZntSdaviLxaJiBErE0XLuueD0oxQo3H3ozz1YpeKm+gN7yAKqNNZt164Ev15JUzMn2ZZyTbP4UGujSpSzMoAbpHGTCPO20eH0iWtYKIjuhIlbIpLE21RcBsKyVMhXjzTjseiLn1TCLg5DqXt12JMgTrd/0DtpTKeS/K3sK0VMFL9LcuoiUZAKDau9bJC8idyV+BMIrMHcnbni267FNayuxZ/MnvE1S8UNkDinjZIDP9IDz9HnhJPb/F4biEuq71jKu/qBlG/ILk6k6a5p8kjlDb7QkeqdQhZU3hFW3UI2EH0a2jHKAsARUDVIgsBVglrnEYC7evcp3VpXT2nQNhQtrKEViVotWx+MLdByUeC9uXI0rvZZzLKYP5+klrFJGJMVRKLlfwgZKcf5PINqengOAiGcN52b7+oMQk8n0DdFoKsReJPPZ+OdQA/kEnCDTxIL4wQwLs/k7xyvPZb6vqfh5i3mC6QTJ+ZvriHmFjpzsCRMXop0nDv9n2RF+GeJILIIfkgE0Ry1p3NId3lex1oIm3J5no6fBWvSydy5x1UM/HmbMk+nzIGTTu6WGmcaY7U4xm3CgvubKE7NBzMOYiHOu+rNE1ScAzaiHvADRD2QKygALwUkZMCjqfE8gQ5dr+Ewh2+xmhYr2I9V23+8GSsHzMEAvYaxKhfDlqupuPLNcCUGtIvialg433L1f7nCnhmuMLgsrvRwv+XKJFeO2z8NGs2V4BUN0GuaKz3Wb7kyyZWL/UF+5a1cOa8sB6bmSo/1W67MjoNLI8tB5HqXtByEegTfcmXUXwHYO16N5Uo08iBeTXOlR+n7uFJR0JAcohMSNb6adOjE1SKEXi+AH4GOPu/gjaSjX6+P3Wnh0GPofXAECTkc4sC8y7l0OiBqjR1nw8PpH5Taek3zMSz2bZ1HOWXtX2KNpaNf7+TOY1gE28JRzWeh51c/2hMvOI6OXPGyosNp0bGYlI5yWWbpGEQHes11jISjX+/kcIzaG27hkJuxTcDRq3dyOJCFY8y4AoChcUUqvpxxZVhc1y5Z3rj7wfPH0QFxX9jfnzjagYZFZ63vUG3pLcwMLL16J3cdHZukoYZH08THKOb0654EMvWYkX0XITWTA+BtNptZc2uhkK/XV24hf2nzXfd2u5f275Xb7loY+rOz7PcsJgQtCMqNnPUt7ksdSWP78FDHfmO9d1vzld3u0szXsV/X9r7ubbDgAs2nhwJvsDVfl/nyjRDNkc7RX32c1np6rM52vk7rFTHWC+t8WA+m2c7Xab7i+dpldT5so12zEYsS7Hu9D+jHPkVp63W9Ji4TP0bBerjLuubugdXXXoS8ANesx6PsqqR7ZIXuBZrPBozG+GbX0JOIfr1TB4xw91v1tm/r065XeHj3bt4RO7IT6M7Ykb7+ef8JdEfoSJ5lUTtkZYYWW563QHHGAEnDmTrxosp1OpAgP6egXlrqLApW0hYc9j1yE++Rn+mAAuQ5c9yaxwP3FIapg4s7RkU05pAMcVmdsFcMOdU5hfjqPw==&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Priority scheduling example with three (3) tasks attached, all triggered by time-elapsed events</em> </center><h1><a class="anchor" id="q_asyncevents"></a>
Asynchronous events and inter-task communication</h1>
<p>Applications existing in heavy environments require tasks and ISR interacting with each other, forcing the application to implement some event model. Here, we understand events, as any identifiable occurrence that has significance for the embedded system. As such, events include changes in hardware, user-generated actions or messages coming from components of the application itself.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>heavycoop</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.45,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-18T13:56:52.698Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;f6hQf5cA3uO1kCzOuRZq\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;dQCMjJpXo0cRyXTNmdZn\&quot; name=\&quot;Página-1\&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Heavy cooperative environment</em> </center><p>As shown in the figure above, two main scenarios are presented, ISR-to-task and task-to-task interaction.</p>
<p>When using interrupts to catch external events, it is expected to be handled with fast and lightweight code to reduce the variable ISR overhead introduced by the code itself. If too much overhead is used inside an ISR, the system will tend to lose future events. In some specific situations, in the interest of stack usage predictability and to facilitate system behavioral analysis, the best approach is to synchronize the ISR with a task to leave the heavy job in the base level instead of the interrupt level, so the interrupt handler only collect event data and clear the interrupt source and therefore exit promptly by deferring the processing of the event data to a task, this is also called <em>Deferred Interrupt Handling</em>.</p>
<p>The other scenario is when a task is performing a specific job and another task must be awakened to perform some activities when the other task finishes.</p>
<p>Both scenarios require some ways in which tasks can communicate with each other. For this, the OS does not impose any specific event processing strategy to the application designer but does provide features that allow the chosen strategy to be implemented in a simple and maintainable way. From the OS perspective, these features are just sources of asynchronous events with specific triggers and related data.</p>
<p>The OS provides the following features for inter-task communication:</p>
<h2><a class="anchor" id="q_notifications"></a>
Notifications</h2>
<p>The notifications allow tasks to interact with other tasks and to synchronize with ISRs without the need of intermediate variables or separate communication objects. By using notifications, a task or ISR can launch another task sending an event and related data to the receiving task. This is depicted in the figure below.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>notification</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-18T14:00:10.088Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;ysBPIzVtP6O5RqbeWd5f\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;bzXds8BJJDB5ZaY9h85V\&quot; name=\&quot;Página-1\&quot;&gt;7VnbcpswEP0aP9aDhAHzGDtxL9NOO3WnTZ86CshGExm5QvjSr+8KxM1A6qR2nZnG8UzQQVqkPUe7izywp6vda0nW0QcRUj7AVrgb2NcDjJGNHPinkX2O2BbKgaVkoelUAXP2ixrQMmjKQpo0OiohuGLrJhiIOKaBamBESrFtdlsI3nzqmixpC5gHhLfRbyxUkUGR61c33lC2jMyjx9jLb6xI0dmsJIlIKLY1yL4Z2FMphMqvVrsp5dp5hV/ycbOeu+XEJI3VMQPiux/vUpF6t9+Ct7+S4Ov1YnH/yljZEJ6aBQ+wy8He5A4ulvqiABYCnqMdzYXMuro/U5F3sMeW/qtD+dgvJLm/KgzA1HIbTbsA156VeUrtC/dLkcYh1Suw4PY2YorO1yTQd7cgOMAiteLQQnCZKCnu6bScoG1Z3mw203NnnBd4LGJqljMjK8a1MN9QvqGKBaS0UpCNy1ltqFR01+t8VFIKe4GKFVVyD12KAZZRwb5oj+2hZ/bGthKWP8qhqCYp2wwlRsrL0nrFNlwYwh9BPu4g/2/8X/cyeH86vXFy74Ora3j++SNfczOLRHC9iosT5h1NGDoXYfafCaNxeKXDHrQCTpKEBU2OmoT2M1BGK90tSOUmG4M63Q0ulftbaLyyhhZyC+S7Hj3EPiqA652xl7f29dYnKhk4iUoD5gujYSs6HxAI6YDIJVUPeG3UTXSNRMdqk1hgknKi2KY5jS5mzRM+CZbFyUJHvnOgI98fYqdpJhGpDKgZWQ/hB8awPTo0Nm4Zy/3RMpYJrlz+0zU46s0YT0kQvdnmTp4a+TjPywSQr14kJ3squ3NQT7o6aWrys89zSE3Y8Q8jndUKc8jr2CKgZKd/P/xVpHPOq7J5ENEw5c9OAIdZ8x+qwG2pwO/Kd6grVmJ0NiG45xXCNUvWRIEaXpTQqwSEO+JBlwzQ+eKB9zwrn2OrlEtVH/YIDT0oZctPq36oNvljixF7hFs6+dfFyLgliwRk0JIGbAbV4rxItu38SzhbxlpGQKIuSCd6P8GO41fmxoqFobY9geARsHj5ni40b6MK+Wyo1JCA4QueSSqCgRQsTNbaI5mPnAl8ge2pBZvHgdlOoY2qNnx1dwlvUDEsgLBMWJQkaksTlelaEUXusrVadf2i9quXiYsPhJSuXXLqVyv/QDhdBYeLO9JMW18nCzB+b5452UFIfzr5nw9CEIQofOGDkOKF/eUk5CjG7LLcu9RBCGqfW4aUQ540tl+C//MN/s7w4EQEQkCHnlyvIwGcK/qjI45CH1df0h1Tt7Xr/DDMMa3qJEw39oNL1KSwuKzSe8At7iVrV1zJolSK4wx992nlKvI7zLlDu1Yc4xPVrtCsftbJu1c/jtk3vwE=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>A notification used to send an event directly from one task to another</em> </center><h3><a class="anchor" id="q_simplenot"></a>
Simple Notifications</h3>
<p>Each task node has a 32-bit notification value which is initialized to zero when a task is added to the scheme. The method <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> with mode = <a class="el" href="group__qnot.html#gga5af9c877b9d556d828c72c01702aa193ae5564829e2f85f6a6873a9d5c4f26d09">qOS::notifyMode::SIMPLE</a> with is used to send an event directly updating the receiving task's notification value increasing it by one. As long as the scheduler sees a non-zero value, the task will be changed to a <code>READY</code> state and eventually, the dispatcher will launch the task according to the execution chain. After being served, the notification value is later decreased.</p>
<dl class="section note"><dt>Note</dt><dd>Sending simple notifications using <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> is interrupt-safe, however, this only catches one event per task because the method overwrites the associated data.</dd></dl>
<h3><a class="anchor" id="q_queuednot"></a>
Queued Notifications</h3>
<p>If the application notifies multiple events to the same task, queued notifications are the right solution instead of using simple notifications.</p>
<p>Here, the <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> with mode = <a class="el" href="group__qnot.html#gga5af9c877b9d556d828c72c01702aa193a9df29ce7ca629ff1d47bca1149d9faae">qOS::notifyMode::QUEUED</a> take advantage of the scheduler FIFO priority-queue. This kind of queue, is somewhat similar to a standard queue, with an important distinction: when a notification is sent, the task is added to the queue with the corresponding priority level, and will be later removed from the queue with the highest priority task first. That is, the tasks are (conceptually) stored in the queue in priority order instead of the insertion order. If two tasks with the same priority are notified, they are served in the FIFO form according to their order inside the queue. The figure below illustrates this behavior.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>prioqueuebehav</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.5,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-19T06:02:45.638Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;W1UZFGIu4Q-80y2Y9Taj\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;HkzHWOtI2eNu7o9rykcJ\&quot; name=\&quot;Página-1\&quot;&gt;7Vtbc+I2FP41PC5j+Yb9mEDo7kx6mU2n2/ZNwQI0MRYriwD763tk5OtxCGkJOFMDM0jHkiyd75N09GEGzni1+0nS9fJnEbF4YFvRbuBMBrZNLG8EX9qyN5bQOhgWkkfGVBoe+A+W1zTWDY9YWiuohIgVX9eNM5EkbKZqNiql2NaLzUVcv+uaLhgyPMxojK3feKSWxkr8sLzwmfHF0tw6sM2AVzQvbEaSLmkkthWTczdwxlIIdUitdmMWa+flfjnUm75wteiYZIk6pQL/4t7vfxkx9+7vP+a3X3+E4/Dxk2nlmcYbM2Db9FbtcxdIsUkipluxBs7tdskVe1jTmb66BdDBtlSrGHIEkqmS4omNRSxkVtsJLP2GK3Mex7k9EQnTJpGoKV3xWJPjM4ufmeIzWrSSO9w2RVtbBfuD6SvJ8wcWEX3djI9JxXYvOo4UcACPmVgxJfdQxFTwHINgTmGSQ7otGZGblhUu5DZqOLgomi5hgoRB6g2o2Qg15xKogf3O1++PA53XNegcBJ3bT7gmaqOuoeZeB7UPOOHCrkHn9Tvcq6j5djgkdgM4/8rA+dfZ5D4+cMGVgRtdLTqZuHdk6n1o9GyLXBe9AKFH+ml3CnD2lYELEXBWD9wpwLlXBi6XOirIeT1yTeQ6dyYgWDvpj3IIts6dB/Lp35/lXsNuRDqHHVZP+jMBgq1zciXB8kl/ImjHrnN6JcH6Sa81t2PXvQgFSyi99oVg616EggWU/gjehC3oXnCClZP+AI5g615wgnUThBpLohv9LAHkxJoldZTqkBa/8ltNTO43Mx5RaHgsklTErMXBDWBus3cbESxrNJ1OW8FNFZUq763hRmabcu2YrF8wnmpux9WfZjA6/Ze2Dz2Tm+wqxSZ7kzm4iEXo4YkGEcCNYiNn7AgAbjthKnzwWviQ2ySLqeLP9W60kcTc4TfBoYPl+ZRYQ6vyIg12OmToNho9DMi0U5IPN42o7jU4DKgsmEItAXh0Xym21gXSI2NAN3JqT4JA4tBkOUkKP/+HZxCwavU/mzenzoGrcdsNXyHgyVRGoa3zTlR2W37PugibsZjHk5lY8WQB1u8btgGm2hBPOxnhFE2fwJ4IxeewyyoO1ETsh11SIRLmuzXewGnMFzBFJvJAhFu9z0Lb8Y2xr3gUZexPIWCAft2zueaLW1q+Ggppk4Dq8zgj8xIqZpPPeB86593CB9w61uu8B50dQ56Uefjo4lLpOack5RmhGU3VlqUqm7yKKvqYDbU2fQmejrX4ojVEaSwFaG6eIfBwR16DVi4OPAhpizzCYa7Hn/9BLixGSpZuYnXgnaFZxDICQkrIiMmeaF0mmj9ym+uXi4kWXJpoWDmdbWQ2pnJVMywr8rD9KXYutsUZi3qynZlszc0y8BHZPL8lxAjfi2hY6z0WFj7GYvb0+5Ifjw1fPAfXokYg9HNWh7S6+20BHvkAAZ4XWEPfD4tX0OBCczU5NdzzguYxyGq09EK4d7ZoDIvOa8mF5GpfWPtN8L3WpaoMVOTf+blsKwjQujW6pAxkY618+mX6K+yGsUbgUdbY5n/f6L9tZK75lGa+uYECwXqX+Se/DKmF/i7Je47WzDZ9+d9gTtUM3yBDGl4FZ9oOm6JwwaEKrfwWWrnvRius5V8CuYom/BpoR5eKo6Cd7RkRJOV7p6FG/sVqANnyL1eH/ar845pz9w8=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Priority-queue behavior</em> </center><p>The scheduler always checks the queue state first, being this event the one with more precedence among the others. If the queue has elements, the scheduler algorithm will extract the data and the corresponding task will be launched with the trigger flag set in <code>byNotificationQueued</code>.</p>
<p>The next figure, shows a cooperative environment with five tasks. Initially, the scheduler activates <code>Task-E</code>, then, this task enqueues data to <code>Task-A</code> and <code>Task-B</code> respectively using the <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> using the <a class="el" href="group__qnot.html#gga5af9c877b9d556d828c72c01702aa193a9df29ce7ca629ff1d47bca1149d9faae">qOS::notifyMode::QUEUED</a> mode. In the next scheduler cycle, the scheduler realizes that the priority-queue is not empty, generating an activation over the task located at the beginning of the queue. In this case, <code>Task-A</code> will be launched and its respective data will be extracted from the queue. However, <code>Task-A</code> also enqueues data to <code>Task-C</code> and <code>Task-D</code>. Following the priority-queue behavior, the scheduler makes a new reordering, so the next queue extraction will be for <code>Task-D</code>, <code>Task-C</code>, and <code>Task-B</code> sequentially.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>notifyqueue++</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;zoom&quot;:1.5,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2023-04-21T05:11:31.721Z\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36\&quot; etag=\&quot;ZUGLWxEBhw-KQGnyQQs3\&quot; version=\&quot;21.2.1\&quot; type=\&quot;google\&quot;&gt;\n  &lt;diagram name=\&quot;Página-1\&quot; id=\&quot;PJo4EIjOwgEw2xYhLQxk\&quot;&gt;\n    &lt;mxGraphModel dx=\&quot;615\&quot; dy=\&quot;-344\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;1169\&quot; pageHeight=\&quot;827\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;\n      &lt;root&gt;\n        &lt;mxCell id=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-1\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#999999;fillColor=none;fontFamily=Helvetica;strokeWidth=2;dashed=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;79.56\&quot; y=\&quot;1068.28\&quot; width=\&quot;270\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-2\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font color=&amp;quot;#808080&amp;quot;&amp;gt;2&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Helvetica;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;89.56\&quot; y=\&quot;1101.56\&quot; width=\&quot;30.5\&quot; height=\&quot;16.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-3\&quot; value=\&quot;D\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;89.56\&quot; y=\&quot;1088.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-4\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;120.06\&quot; y=\&quot;1100.8700000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;140.06\&quot; y=\&quot;1101.2100000000003\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-5\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font color=&amp;quot;#808080&amp;quot;&amp;gt;2&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Helvetica;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;139.56\&quot; y=\&quot;1101.56\&quot; width=\&quot;30.5\&quot; height=\&quot;16.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-6\&quot; value=\&quot;E\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;139.56\&quot; y=\&quot;1088.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-7\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;170.06\&quot; y=\&quot;1100.8700000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;190.06\&quot; y=\&quot;1101.2100000000003\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-8\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font color=&amp;quot;#808080&amp;quot;&amp;gt;1&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Helvetica;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;190.06\&quot; y=\&quot;1101.56\&quot; width=\&quot;30.5\&quot; height=\&quot;16.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-9\&quot; value=\&quot;A\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;190.06\&quot; y=\&quot;1088.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-10\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;220.56\&quot; y=\&quot;1100.8700000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;240.56\&quot; y=\&quot;1101.2100000000003\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-11\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font color=&amp;quot;#808080&amp;quot;&amp;gt;1&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Helvetica;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;238.68\&quot; y=\&quot;1101.56\&quot; width=\&quot;30.5\&quot; height=\&quot;16.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-12\&quot; value=\&quot;C\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;238.68\&quot; y=\&quot;1088.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-13\&quot; value=\&quot;\&quot; style=\&quot;endArrow=classic;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;269.18\&quot; y=\&quot;1100.8700000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;289.18\&quot; y=\&quot;1101.2100000000003\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-14\&quot; value=\&quot;&amp;lt;b&amp;gt;&amp;lt;font color=&amp;quot;#808080&amp;quot;&amp;gt;0&amp;lt;/font&amp;gt;&amp;lt;/b&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Helvetica;strokeWidth=2;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;289.18\&quot; y=\&quot;1101.56\&quot; width=\&quot;30.5\&quot; height=\&quot;16.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-15\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;289.18\&quot; y=\&quot;1088.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-16\&quot; value=\&quot;\&quot; style=\&quot;endArrow=baseDash;html=1;rounded=0;strokeColor=#007FFF;shadow=0;curved=1;strokeWidth=2;endFill=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;319.68\&quot; y=\&quot;1100.8700000000001\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;339.68\&quot; y=\&quot;1101.2100000000003\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-17\&quot; value=\&quot;current task scheme\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=0\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;90.56\&quot; y=\&quot;1068.28\&quot; width=\&quot;130\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-18\&quot; value=\&quot;E\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;20\&quot; y=\&quot;1152.28\&quot; width=\&quot;220\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-19\&quot; value=\&quot;A\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;282.06\&quot; y=\&quot;1152.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-20\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;302.06\&quot; y=\&quot;1152.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-21\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;322.06\&quot; y=\&quot;1152.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-22\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;342.06\&quot; y=\&quot;1152.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-23\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;362.06\&quot; y=\&quot;1152.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-24\&quot; value=\&quot;A\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;20\&quot; y=\&quot;1222.28\&quot; width=\&quot;222.06\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-25\&quot; value=\&quot;D\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;282.06\&quot; y=\&quot;1222.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-26\&quot; value=\&quot;C\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;302.06\&quot; y=\&quot;1222.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-27\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;342.06\&quot; y=\&quot;1222.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-28\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;362.06\&quot; y=\&quot;1222.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-29\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;322.06\&quot; y=\&quot;1222.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-30\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Lucida Console;strokeWidth=2;fontStyle=0;fontSize=8;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.56\&quot; y=\&quot;1300.56\&quot; width=\&quot;30.5\&quot; height=\&quot;11.72\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-31\&quot; value=\&quot;D\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.56\&quot; y=\&quot;1287.28\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-32\&quot; value=\&quot;C\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;282.06\&quot; y=\&quot;1283.92\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-33\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;302.06\&quot; y=\&quot;1283.92\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-34\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;342.06\&quot; y=\&quot;1283.92\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-35\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;362.06\&quot; y=\&quot;1283.92\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-36\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Lucida Console;strokeWidth=2;fontStyle=0;fontSize=8;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.56\&quot; y=\&quot;1348.92\&quot; width=\&quot;30.5\&quot; height=\&quot;13.36\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-37\&quot; value=\&quot;C\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.56\&quot; y=\&quot;1335.6399999999999\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-38\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=#E6E6E6;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;282.06\&quot; y=\&quot;1332.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-39\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;342.06\&quot; y=\&quot;1332.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-40\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;362.06\&quot; y=\&quot;1332.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-41\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;322.06\&quot; y=\&quot;1283.92\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-42\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;301.56\&quot; y=\&quot;1332.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-43\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;322.06\&quot; y=\&quot;1332.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-44\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Lucida Console;strokeWidth=2;fontStyle=0;fontSize=8;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.18\&quot; y=\&quot;1398.92\&quot; width=\&quot;30.5\&quot; height=\&quot;13.36\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-45\&quot; value=\&quot;B\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;fontColor=#808080;strokeColor=#007FFF;fillStyle=solid;fontFamily=Helvetica;strokeWidth=2;fontStyle=1\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;211.18\&quot; y=\&quot;1385.6399999999999\&quot; width=\&quot;30.5\&quot; height=\&quot;13.28\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-46\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;341.68\&quot; y=\&quot;1382.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-47\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;361.68\&quot; y=\&quot;1382.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-48\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;301.18\&quot; y=\&quot;1382.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-49\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;321.68\&quot; y=\&quot;1382.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-50\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#808080;fillColor=none;fontFamily=Helvetica;strokeWidth=2;fontColor=#808080;fontStyle=1;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;281.18\&quot; y=\&quot;1382.28\&quot; width=\&quot;20\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-51\&quot; value=\&quot;triggered by a simple notification from an ISR\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;32.56\&quot; y=\&quot;1132.28\&quot; width=\&quot;210\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-52\&quot; value=\&quot;triggered by a dequeued notification\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;31.560000000000002\&quot; y=\&quot;1202.28\&quot; width=\&quot;210\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-53\&quot; value=\&quot;triggered by a dequeued notification\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;71.56\&quot; y=\&quot;1267.28\&quot; width=\&quot;171\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-54\&quot; value=\&quot;triggered by a dequeued notification\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;71.56\&quot; y=\&quot;1315.6399999999999\&quot; width=\&quot;171\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-55\&quot; value=\&quot;triggered by a dequeued notification\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=10;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;71.56\&quot; y=\&quot;1365.6399999999999\&quot; width=\&quot;171\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-56\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;entryX=0.442;entryY=1.117;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.848;exitDx=0;exitDy=0;exitPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;IcMORX9sJ9LIl6OeQDrf-60\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;270\&quot; y=\&quot;1190\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;290.90000000000003\&quot; y=\&quot;1173.62\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;290.56\&quot; y=\&quot;1191.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-57\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;IcMORX9sJ9LIl6OeQDrf-60\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;270\&quot; y=\&quot;1187\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;291.56\&quot; y=\&quot;1187.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-58\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.442;entryY=1.117;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;242.06000000000012\&quot; y=\&quot;1261.06\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;290.90000000000003\&quot; y=\&quot;1243.62\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;290.56\&quot; y=\&quot;1261.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-59\&quot; value=\&quot;\&quot; style=\&quot;endArrow=none;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;242.06000000000012\&quot; y=\&quot;1257.06\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;291.56\&quot; y=\&quot;1257.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-60\&quot; value=\&quot;&amp;lt;font color=&amp;quot;#808080&amp;quot; style=&amp;quot;font-size: 8px;&amp;quot;&amp;gt;os.notify( notifyMode::QUEUED, A, &amp;quot;data1&amp;quot;)&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(128, 128, 128);&amp;quot;&amp;gt;os.notify( notifyMode::QUEUED, B, &amp;quot;data2&amp;quot;)&amp;lt;/span&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Lucida Console;strokeWidth=2;fontStyle=0;fontSize=8;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;20\&quot; y=\&quot;1165.56\&quot; width=\&quot;220\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-61\&quot; value=\&quot;&amp;lt;font color=&amp;quot;#808080&amp;quot; style=&amp;quot;font-size: 8px;&amp;quot;&amp;gt;os.notify( notifyMode::QUEUED, C, &amp;quot;data3&amp;quot;)&amp;lt;br&amp;gt;&amp;lt;/font&amp;gt;&amp;lt;span style=&amp;quot;color: rgb(128, 128, 128);&amp;quot;&amp;gt;os.notify( notifyMode::QUEUED, D, &amp;quot;data4&amp;quot;)&amp;lt;/span&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=#007FFF;fillColor=none;fontFamily=Lucida Console;strokeWidth=2;fontStyle=0;fontSize=8;align=center;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;20\&quot; y=\&quot;1235.56\&quot; width=\&quot;222.06\&quot; height=\&quot;30\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-62\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;exitX=0;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;282.06\&quot; y=\&quot;1233.28\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;241.56\&quot; y=\&quot;1233.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;281.56\&quot; y=\&quot;1233.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-63\&quot; value=\&quot;&amp;quot;data1&amp;quot;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Lucida Console;rounded=0;strokeWidth=2;fontStyle=0;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;235.56\&quot; y=\&quot;1223.28\&quot; width=\&quot;49.75\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-64\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;exitX=0;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;283.06\&quot; y=\&quot;1293.28\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;242.56\&quot; y=\&quot;1293.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;282.56\&quot; y=\&quot;1293.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-65\&quot; value=\&quot;&amp;quot;data4&amp;quot;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Lucida Console;rounded=0;strokeWidth=2;fontStyle=0;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;236.56\&quot; y=\&quot;1283.28\&quot; width=\&quot;49.75\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-66\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;exitX=0;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;283.06\&quot; y=\&quot;1342.28\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;242.56\&quot; y=\&quot;1342.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;282.56\&quot; y=\&quot;1342.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-67\&quot; value=\&quot;&amp;quot;data3&amp;quot;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Lucida Console;rounded=0;strokeWidth=2;fontStyle=0;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;236.56\&quot; y=\&quot;1332.28\&quot; width=\&quot;49.75\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-68\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;shadow=0;fontFamily=Lucida Console;fontSize=10;fontColor=#B3B3B3;strokeColor=#808080;strokeWidth=2;startArrow=none;startFill=0;endFill=1;exitX=0;exitY=1;exitDx=0;exitDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;282.06\&quot; y=\&quot;1392.28\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;241.56\&quot; y=\&quot;1392.28\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;281.56\&quot; y=\&quot;1392.28\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-69\&quot; value=\&quot;&amp;quot;data2&amp;quot;\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Lucida Console;rounded=0;strokeWidth=2;fontStyle=0;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;235.56\&quot; y=\&quot;1382.28\&quot; width=\&quot;49.75\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-70\&quot; value=\&quot;priority queue\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=0\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;307.06\&quot; y=\&quot;1132.28\&quot; width=\&quot;84.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-71\&quot; value=\&quot;head\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;271.06\&quot; y=\&quot;1136.28\&quot; width=\&quot;35.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-72\&quot; value=\&quot;head\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;271.06\&quot; y=\&quot;1206.28\&quot; width=\&quot;35.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-73\&quot; value=\&quot;head\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;270.43\&quot; y=\&quot;1267.28\&quot; width=\&quot;35.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-74\&quot; value=\&quot;head\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;270.43\&quot; y=\&quot;1316.28\&quot; width=\&quot;35.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-75\&quot; value=\&quot;head\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;269.43\&quot; y=\&quot;1366.64\&quot; width=\&quot;35.5\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-76\&quot; value=\&quot;\&quot; style=\&quot;endArrow=blockThin;html=1;rounded=0;strokeColor=#808080;shadow=0;curved=1;strokeWidth=2;startArrow=none;startFill=0;endFill=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;90.55999999999986\&quot; y=\&quot;1112.4199999999998\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;55.890000000000015\&quot; y=\&quot;1107.4199999999998\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;IcMORX9sJ9LIl6OeQDrf-77\&quot; value=\&quot;priority&amp;#xa; value\&quot; style=\&quot;text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;shadow=1;fontColor=#808080;fontFamily=Helvetica;rounded=0;strokeWidth=2;fontStyle=2;fontSize=8;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;21.560000000000002\&quot; y=\&quot;1098.28\&quot; width=\&quot;38\&quot; height=\&quot;20\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n      &lt;/root&gt;\n    &lt;/mxGraphModel&gt;\n  &lt;/diagram&gt;\n&lt;/mxfile&gt;\n&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Priority-queue example</em> </center><dl class="section note"><dt>Note</dt><dd>Any queue extraction involves an activation of the receiving task. The extracted data will be available inside the <a class="el" href="classq_o_s_1_1event__t.html" title="The task argument with all the regarding information of the task execution.">qOS::event_t</a> class. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Among all the provided events, queued notifications have the highest precedence.</dd></dl>
<h3><a class="anchor" id="q_notificationsend"></a>
Sending notifications</h3>
<p>The kernel handles all the notifications by itself (simple or queued), so intermediate objects are not needed. Just calling <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> is enough to send notifications. After the task callback is invoked, the notification is cleared by the dispatcher. Here the application writer must read the respective fields of the event-data class to check the received notification.</p>
<p>The next example shows an ISR to task communication. Two interrupts send notifications to a single task with specific event data. The receiver task <code>taskA</code> after further processing, send an event to <code>taskB</code> to handle the event generated by the transmitter <code>taskA</code>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;HAL.h&quot;</span> <span class="comment">/*hardware dependent code*/</span></div>
<div class="line"><span class="preprocessor">#include &quot;QuarkTS.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceq_o_s.html">qOS</a>;</div>
<div class="line"> </div>
<div class="line">task_t taskA, taskB;</div>
<div class="line"><span class="keywordtype">void</span> taskA_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e );</div>
<div class="line"><span class="keywordtype">void</span> taskB_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e );</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *app_events[] = {</div>
<div class="line">                            <span class="stringliteral">&quot;Timer1seg&quot;</span>,</div>
<div class="line">                            <span class="stringliteral">&quot;ButtonRisingEdge&quot;</span>,</div>
<div class="line">                            <span class="stringliteral">&quot;ButtonFallingEdge&quot;</span>,</div>
<div class="line">                            <span class="stringliteral">&quot;3Count_ButtonPush&quot;</span></div>
<div class="line">                           };</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*==================================================================*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt Timer1Second_ISR( <span class="keywordtype">void</span>) {</div>
<div class="line">    os.<a class="code hl_function" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298">notify</a>( notifyMode::SIMPLE, taskA );</div>
<div class="line">    HAL_ClearInterruptFlags( HAL_TMR_ISR ); <span class="comment">/*hardware dependent code*/</span></div>
<div class="line">}</div>
<div class="line"><span class="comment">/*==================================================================*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt ExternalInput_ISR( <span class="keywordtype">void</span> ) {</div>
<div class="line">    <span class="keywordflow">if</span> ( RISING_EDGE == HAL_GetInputEdge() ) { <span class="comment">/*hardware dependent code*/</span></div>
<div class="line">        <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298">notify</a>( notifyMode::QUEUED, taskA, app_events[1] );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298">notify</a>( notifyMode::QUEUED, taskA, app_events[2] );</div>
<div class="line">    }</div>
<div class="line">    HAL_ClearInterruptFlags( HAL_EXT_ISR ); <span class="comment">/*hardware dependent code*/</span></div>
<div class="line">}</div>
<div class="line"><span class="comment">/*==================================================================*/</span></div>
<div class="line"><span class="keywordtype">void</span> taskA_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> press_counter = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> ( e.getTrigger() ) { <span class="comment">/*check the source of the event*/</span></div>
<div class="line">        <span class="keywordflow">case</span> trigger::byNotificationSimple:</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">            * Do something here to process the timer event</span></div>
<div class="line"><span class="comment">            */</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> trigger::byNotificationQueued:</div>
<div class="line">            <span class="comment">/*here, we only care about the Falling Edge events*/</span></div>
<div class="line">            <span class="keywordflow">if</span> ( 0 == strcmp( e.EventData, <span class="stringliteral">&quot;ButtonFallingEdge&quot;</span> ) ) {</div>
<div class="line">                press_counter++; <span class="comment">/*count the button press*/</span></div>
<div class="line">                <span class="keywordflow">if</span> ( 3 == press_counter ) { <span class="comment">/*after 3 presses*/</span></div>
<div class="line">                    <span class="comment">/*send the notification of 3 presses to taskB*/</span></div>
<div class="line">                    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298">notify</a>( notifyMode::SIMPLE, taskB, app_events[3] );</div>
<div class="line">                    press_counter = 0;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*==================================================================*/</span></div>
<div class="line"><span class="keywordtype">void</span> taskB_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    <span class="keywordflow">if</span> ( trigger::byNotificationSimple == e.getTrigger() ) {</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * we can do more here, but this is just an example,</span></div>
<div class="line"><span class="comment">         * so, this task will only print out the received</span></div>
<div class="line"><span class="comment">         * notification event.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        trace::log &lt;&lt; static_cast&lt;char&gt;( e-&gt;EventData ) &lt;&lt; trace::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*==================================================================*/</span></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">void</span> ) {</div>
<div class="line">    HAL_Setup_MCU(); <span class="comment">/*hardware dependent code*/</span></div>
<div class="line">    trace::setOutputFcn( HAL_OutPutChar );</div>
<div class="line">    <span class="comment">/* setup the scheduler to handle up to 10 queued notifications*/</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a8a1c57e7736a22fb8036bfa60b96915c">init</a>( HAL_GetTick, <span class="keyword">nullptr</span> );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">add</a>( taskA, taskA_Callback, core::LOWEST_PRIORITY );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">add</a>( taskB, taskB_Callback, core::LOWEST_PRIORITY );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a30b4c1ac78976e2d289a710647300d5c">run</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassq_o_s_1_1core_html_a30b4c1ac78976e2d289a710647300d5c"><div class="ttname"><a href="classq_o_s_1_1core.html#a30b4c1ac78976e2d289a710647300d5c">qOS::core::run</a></div><div class="ttdeci">bool run(void) noexcept</div><div class="ttdoc">Executes the scheduling scheme. It must be called once after the task pool has been defined.</div></div>
<div class="ttc" id="aclassq_o_s_1_1core_html_a882991afb9548674668aa51dbe694d6e"><div class="ttname"><a href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">qOS::core::add</a></div><div class="ttdeci">bool add(task &amp;Task, taskFcn_t callback, const priority_t p, const duration_t t, const iteration_t n, const taskState s=taskState::ENABLED_STATE, void *arg=nullptr) noexcept</div><div class="ttdoc">Add a task to the scheduling scheme. The task is scheduled to run every t time units,...</div></div>
<div class="ttc" id="aclassq_o_s_1_1core_html_a8a1c57e7736a22fb8036bfa60b96915c"><div class="ttname"><a href="classq_o_s_1_1core.html#a8a1c57e7736a22fb8036bfa60b96915c">qOS::core::init</a></div><div class="ttdeci">bool init(const getTickFcn_t tFcn=nullptr, taskFcn_t callbackIdle=nullptr) noexcept</div><div class="ttdoc">Task Scheduler initialization. This core method is required and must be called once in the applicatio...</div></div>
<div class="ttc" id="aclassq_o_s_1_1event__t_html"><div class="ttname"><a href="classq_o_s_1_1event__t.html">qOS::event_t</a></div><div class="ttdoc">The task argument with all the regarding information of the task execution.</div><div class="ttdef"><b>Definition</b> task.hpp:105</div></div>
<div class="ttc" id="agroup__qnot_html_gaa6de5a8fa854b30d78de7540e21f4298"><div class="ttname"><a href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298">qOS::core::notify</a></div><div class="ttdeci">bool notify(notifyMode mode, task &amp;Task, void *eventData=nullptr) noexcept</div><div class="ttdoc">Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...</div></div>
<div class="ttc" id="agroup__qtaskcreation_html_gaefc7088d1435e64e433d09541fae505c"><div class="ttname"><a href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">qOS::os</a></div><div class="ttdeci">core &amp; os</div><div class="ttdoc">The predefined instance of the OS kernel interface.</div></div>
<div class="ttc" id="anamespaceq_o_s_html"><div class="ttname"><a href="namespaceq_o_s.html">qOS</a></div><div class="ttdoc">OS/Kernel interfaces.</div><div class="ttdef"><b>Definition</b> bytebuffer.hpp:7</div></div>
</div><!-- fragment --><h3><a class="anchor" id="qnotspread"></a>
Spread a notification</h3>
<p>In some systems, we need the ability to broadcast an event to all tasks. This is often referred to as a barrier. This means that a group of tasks should stop activities at some point and cannot proceed until another task or ISR raise a specific event. For this kind of implementation, we can also use the <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> method but in this case, without specifying a target task.</p>
<dl class="section note"><dt>Note</dt><dd>In this mode, <a class="el" href="group__qnot.html#gaa6de5a8fa854b30d78de7540e21f4298" title="Sends a notification generating an asynchronous event. If mode = notifyMode::SIMPLE,...">qOS::core::notify()</a> spreads a notification event among all the tasks in the scheduling scheme, so, for tasks that are not part of the barrier, just discard the notification. This operation will be performed in the next scheduling cycle.</dd></dl>
<h2><a class="anchor" id="q_queues"></a>
Queues</h2>
<p>A queue is a linear data structure with simple operations based on the FIFO (First In First Out) principle. It is capable to hold a finite number of fixed-size data items. The maximum number of items that a queue can hold is called its length. Both the length and the size of each data item are set when the queue is created.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>queues</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-18T14:39:29.978Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;poeP1qF8UpQnuG3sVoca\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;txs8vVA5wulF-spgP7-0\&quot; name=\&quot;Página-1\&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Queues conceptual representation</em> </center><p>As shown above, the last position is connected back to the first position to make a circle. It is also called ring-buffer or circular-queue.</p>
<p>In general, this kind of data structure is used to serialize data between tasks, allowing some elasticity in time. In many cases, the queue is used as a data buffer in interrupt service routines. This buffer will collect the data so, at some later time, another task can fetch the data for further processing. This use case is the single "task to task" buffering case. There are also other applications for queues as serializing many data streams into one receiving stream (multiple tasks to a single task) or vice-versa (single task to multiple tasks).</p>
<dl class="section note"><dt>Note</dt><dd>The OS uses the queue by copy method. Queuing by copy is considered to be simultaneously more powerful and simpler to use than queuing by reference.</dd></dl>
<p>Queuing by copy does not prevent the queue from also being used to queue by reference. For example, when the size of the data being queued makes it impractical to copy the data into the queue, then a pointer to the data can be copied into the queue instead.</p>
<h3><a class="anchor" id="q_queuesetup"></a>
Setting up a queue</h3>
<p>A queue must be explicitly initialized before it can be used. These objects are referenced by the class <a class="el" href="classq_o_s_1_1queue.html" title="A Queue object.">qOS::queue</a>. Both, the constructor or the <a class="el" href="classq_o_s_1_1queue.html#ae2aea7eb71321d3c399a11044be9e0e6" title="Configures a Queue. Here, the RAM used to hold the queue data pData is statically allocated at compil...">qOS::queue::setup()</a> method can be used to configure the queue and initialize the instance.</p>
<p>The required RAM for the queue data should be provided by the application writer and could be statically allocated at compile time or in run-time using the <a class="el" href="q_memmang.html">Memory Management</a> extension.</p>
<h3><a class="anchor" id="q_attachqueue"></a>
Attach a queue to a task</h3>
<p>Additional features are provided by the kernel when the queues are attached to tasks; this allows the scheduler to pass specific queue events to it, usually, states of the object itself that needs to be handled, in this case by a task. For this, use the <a class="el" href="classq_o_s_1_1task.html#ad43545d022d9fc3d2232d37ccd26ea88" title="Attach a queue to the Task.">qOS::task::attachQueue()</a> method.</p>
<p>The following attaching modes are provided:</p><ul>
<li><a class="el" href="group__qtaskmanip.html#gga510a1627bf9fff09eec6bd9b02d82be4a85bec350eace8b51b57fb60f5eec6da7">qOS::queueLinkMode::QUEUE_RECEIVER</a> : The task will be triggered if there are elements in the queue.</li>
<li><a class="el" href="group__qtaskmanip.html#gga510a1627bf9fff09eec6bd9b02d82be4ae7178fccc5ed4efedaaf6cafebe0046b">qOS::queueLinkMode::QUEUE_FULL</a> : The task will be triggered if the queue is full.</li>
<li><a class="el" href="group__qtaskmanip.html#gga510a1627bf9fff09eec6bd9b02d82be4aee71854ab3d4e6e1c5563891178ce396">qOS::queueLinkMode::QUEUE_COUNT</a> : The task will be triggered if the count of elements in the queue reaches the specified value.</li>
<li><a class="el" href="group__qtaskmanip.html#gga510a1627bf9fff09eec6bd9b02d82be4a456f6bb4a61ab7fc246cf11c22a64a34">qOS::queueLinkMode::QUEUE_EMPTY</a> : The task will be triggered if the queue is empty.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>For the <a class="el" href="group__qtaskmanip.html#gga510a1627bf9fff09eec6bd9b02d82be4a85bec350eace8b51b57fb60f5eec6da7">qOS::queueLinkMode::QUEUE_RECEIVER</a> mode, data from the front of the queue will be received automatically in every trigger, this involves a data removal after the task is served. During the respective task execution, the <a class="el" href="classq_o_s_1_1event__t.html#aab52427241a29dfd601229464182956e" title="Associated data of the event. Specific data will reside here according to the event source....">qOS::event_t::EventData</a> field of the <a class="el" href="classq_o_s_1_1event__t.html" title="The task argument with all the regarding information of the task execution.">qOS::event_t</a> class will be pointing to the extracted data. For the other modes, the <a class="el" href="classq_o_s_1_1event__t.html#aab52427241a29dfd601229464182956e" title="Associated data of the event. Specific data will reside here according to the event source....">qOS::event_t::EventData</a> field will point to the queue that triggered the event.</dd></dl>
<h3><a class="anchor" id="q_queueexample"></a>
A queue example</h3>
<p>This example shows the usage of QuarkTS++ queues. The application is the classic producer/consumer example. The producer task puts data into the queue. When the queue reaches a specific item count, the consumer task is triggered to start fetching data from the queue. Here, both tasks are attached to the queue.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;QuarkTS.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceq_o_s.html">qOS</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt Timer0_ISR( <span class="keywordtype">void</span> ) {</div>
<div class="line">    clock::sysTick();</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><a class="code hl_class" href="classq_o_s_1_1task.html">task</a> tProducer, tConsumer; <span class="comment">/*task nodes*/</span></div>
<div class="line"><a class="code hl_class" href="classq_o_s_1_1queue.html">queue</a> userQueue; <span class="comment">/*Queue Handle*/</span></div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The producer task puts data into the buffer if there is enough free</span></div>
<div class="line"><span class="comment"> * space in it, otherwise the task blocks itself and wait until the queue</span></div>
<div class="line"><span class="comment"> * is empty to resume. */</span></div>
<div class="line"><span class="keywordtype">void</span> tProducer_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    <span class="keyword">static</span> uint16_t unData = 0;</div>
<div class="line">    unData++;</div>
<div class="line">    <span class="comment">/*Queue is empty, enable the producer if it was disabled*/</span></div>
<div class="line">    <span class="keywordflow">if</span> ( byQueueEmpty == e.getTrigger() ) {</div>
<div class="line">        e.thisTask().resume();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*send data to the queue*/</span></div>
<div class="line">    <span class="keywordflow">if</span> ( <span class="keyword">false</span> == UserQueue.send( &amp;unData ) ) {</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">        * if the data insertion fails, the queue is full</span></div>
<div class="line"><span class="comment">        * and the task disables itself</span></div>
<div class="line"><span class="comment">        */</span></div>
<div class="line">        e.thisTask().suspend();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/* The consumer task gets one element from the queue.*/</span></div>
<div class="line"><span class="keywordtype">void</span> tConsumer_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    uint16_t unData;</div>
<div class="line">    <a class="code hl_class" href="classq_o_s_1_1queue.html">queue</a> *ptrQueue; <span class="comment">/*a pointer to the queue that triggers the event*/</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ( byQueueCount == e.getTrigger() ) {</div>
<div class="line">        ptrQueue = (queue_t *)e.EventData;</div>
<div class="line">        ptrQueue-&gt;<a class="code hl_function" href="classq_o_s_1_1queue.html#a12f8f0c55ea77ac700c440d79d753bae">receive</a>( &amp;unData );</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> IdleTask_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    <span class="comment">/*nothing to do...*/</span></div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">void</span> ) {</div>
<div class="line">    uint8_t BufferMem[ 16*<span class="keyword">sizeof</span>(uint16_t) ] = { 0u };</div>
<div class="line">    HardwareSetup();  <span class="comment">//hardware-specific code</span></div>
<div class="line">    <span class="comment">/* next line is used to set up hardware with specific code to fire</span></div>
<div class="line"><span class="comment">     * interrupts at 1ms - timer tick*/</span></div>
<div class="line">    Configure_Periodic_Timer0_Interrupt_1ms();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a8a1c57e7736a22fb8036bfa60b96915c">init</a>( <span class="keyword">nullptr</span>, IdleTask_Callback );</div>
<div class="line">    <span class="comment">/*Setup the queue*/</span></div>
<div class="line">    userQueue.<a class="code hl_function" href="classq_o_s_1_1queue.html#ae2aea7eb71321d3c399a11044be9e0e6">setup</a>&lt;uint16_t&gt;( BufferMem, 16 );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*  Append the producer task with 100mS rate. */</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">add</a>( tProducer, tProducer_Callback, core::MEDIUM_PRIORITY,</div>
<div class="line">            100_ms, task::PERIODIC, taskState::ENABLED_STATE, <span class="stringliteral">&quot;producer&quot;</span> );</div>
<div class="line">    <span class="comment">/* Append the consumer as an event task. The consumer will</span></div>
<div class="line"><span class="comment">     * wait until an event trigger their execution</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">add</a>( tConsumer, tConsumer_Callback, core::MEDIUM_PRIORITY, <span class="stringliteral">&quot;consumer&quot;</span> );</div>
<div class="line">    <span class="comment">/* the queue will be attached to the consumer task</span></div>
<div class="line"><span class="comment">     * in Count mode. This mode sends an event to the consumer</span></div>
<div class="line"><span class="comment">     * task when the queue fills to a level of 4 elements</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    tConsumer.<a class="code hl_function" href="classq_o_s_1_1task.html#ad43545d022d9fc3d2232d37ccd26ea88">attachQueue</a>( userQueue, queueLinkMode::QUEUE_COUNT, 4 );</div>
<div class="line">    <span class="comment">/* the queue will be attached to the producer task in</span></div>
<div class="line"><span class="comment">     * queueLinkMode = QUEUE_EMPTY mode. This mode sends an event to the producer</span></div>
<div class="line"><span class="comment">     * task when the queue is empty</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    tProducer.<a class="code hl_function" href="classq_o_s_1_1task.html#ad43545d022d9fc3d2232d37ccd26ea88">attachQueue</a>( userQueue, queueLinkMode::QUEUE_EMPTY );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a30b4c1ac78976e2d289a710647300d5c">run</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassq_o_s_1_1queue_html"><div class="ttname"><a href="classq_o_s_1_1queue.html">qOS::queue</a></div><div class="ttdoc">A Queue object.</div><div class="ttdef"><b>Definition</b> queue.hpp:44</div></div>
<div class="ttc" id="aclassq_o_s_1_1queue_html_a12f8f0c55ea77ac700c440d79d753bae"><div class="ttname"><a href="classq_o_s_1_1queue.html#a12f8f0c55ea77ac700c440d79d753bae">qOS::queue::receive</a></div><div class="ttdeci">bool receive(void *dst) noexcept</div><div class="ttdoc">Receive an item from a queue (and removes it). The item is received by copy so a buffer of adequate s...</div></div>
<div class="ttc" id="aclassq_o_s_1_1queue_html_ae2aea7eb71321d3c399a11044be9e0e6"><div class="ttname"><a href="classq_o_s_1_1queue.html#ae2aea7eb71321d3c399a11044be9e0e6">qOS::queue::setup</a></div><div class="ttdeci">bool setup(void *pData, const size_t size, const size_t count) noexcept</div><div class="ttdoc">Configures a Queue. Here, the RAM used to hold the queue data pData is statically allocated at compil...</div></div>
<div class="ttc" id="aclassq_o_s_1_1task_html"><div class="ttname"><a href="classq_o_s_1_1task.html">qOS::task</a></div><div class="ttdoc">A task node object.</div><div class="ttdef"><b>Definition</b> task.hpp:348</div></div>
<div class="ttc" id="aclassq_o_s_1_1task_html_ad43545d022d9fc3d2232d37ccd26ea88"><div class="ttname"><a href="classq_o_s_1_1task.html#ad43545d022d9fc3d2232d37ccd26ea88">qOS::task::attachQueue</a></div><div class="ttdeci">bool attachQueue(queue &amp;q, const queueLinkMode mode, const size_t arg=1U) noexcept</div><div class="ttdoc">Attach a queue to the Task.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="qeventflags"></a>
Event Flags</h2>
<p>Every task node has a set of built-in event bits called Event-Flags, which can be used to indicate if an event has occurred or not. They are somewhat similar to signals, but with greater flexibility, providing a low-cost, but flexible means of passing simple messages between tasks. One task can set or clear any combination of event flags. Another task may read the event flag group at any time or may wait for a specific pattern of flags.</p>
<center>  
<!DOCTYPE html>
<html>
<head>
<title>eventflags</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;zoom&quot;:1.25,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-10-19T13:56:56.208Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36\&quot; etag=\&quot;ioWXi7ZzjvlYkIrrLvh0\&quot; version=\&quot;20.2.2\&quot; type=\&quot;google\&quot;&gt;&lt;diagram id=\&quot;_ToeAvv05QZHaTr5tAgO\&quot; name=\&quot;Página-1\&quot;&gt;7Vxtb6M4EP41+XgRGEjIx23abD90ddV2pdvdLycXXOKrgyNw83K//mxiB8iQtw2cWMltpeLBHvA8z0zGg8nAmy42nzO8nH/hMWED5MSbgXc/QMh1fST/Kcl2J/F0O8lorPuUghf6L9FCR0s/aEzyWkfBORN0WRdGPE1JJGoynGV8Xe/2xln9qkucECB4iTCD0r9oLOZmWqNJeeKR0GSuLx2i8e7EApvOeib5HMd8XRF5DwNvmnEudkeLzZQwZTtjl9242ZGz+xvLSCouGUAff66evqV04X//h+b58kv4PP9Da1lh9qEnPEAjJvXdvcqDRB0YwRuX19Gybzh/33fMDnteIpH3WVVYEVcuXJhNbA0WGf9IY6Km48jT6zkV5GWJI3V2LcknZXOxYLLlysNcZPydTDnjWTHac5zxbDZTE6GMGXnKU6LnNsMLyhRJHwlbEUEjvNdikEe6a0Vr6Kjf/d1W4TC2JZkgm4pIw/OZ8AUR2VZ20WeDYBjsxmhfcaVsONaydUk/FGr2zSvMG/ma9ZrxyV5/SQp5oHlxBUdQA0duQaZqf2nB6fQh2OFyxLKnkXzRd5FzpmZxDZTdQOZeDpkJcq1D5gHInNsw69KbdNCfnKBA0U3fekPguxq2kQNgCyZDBGFz/SbUzODWcfMtbidxG/v9xC2wuJ3ELQz7idvI4nYSN9dB/QRuDIBz/w/gDtOVnqPnjvqJXmjd7jRwXk/zk4kF7jRwfk8TFLPSsMgdQy7oaYriwhKNRa6G3LinOYoLCycWuRpyYU/zE9fWT04jh5yeJiiuraCcQc7ta4ZiayhnkEN9zVBgFcUuxiF8fl/TFFhLsY5XQy7oa5pi6yhnkBv3NU2BhRQbMiF8YU9zFQSrKRY+CN+kpwnLfio2bjYj57k9zVWQLamcQQ71NFdBsKTysJLznDGc5ABCOVsBwDEgQFwwo0kqm5FUSKT8ThlMIsM+6RMLGsdK910uiUDT5Im8qSn7peSrtoIScTn8jRV79eZyIJEa7pacpqIwSnAn/yTrpspYgbzbqWy7ZVv+qe6ZxDuVE8C0AJPgXKxJrmaVcYEFfi3mWuxvMhsD3TNEaaRene1nidgCx/wJoJg3adrzNBpDiqHOCAYrP4BWhhZP+JWwZ55TQbmixysXgi+qUChbxjif7w0LKFaJIYdsE3y507VU111sErUzdkgYiUSm+g0ZT2j0d4IFySvHinlLkmF9U4oCR3e4XRBaQGSbFD/NJIE+1UYwatiuM/KbmBI0MMUre7ZPFlhsAmQhafxJbSAuTVKBvO51HSBy1Pwkrm1YhsavmtWBZjWyjDDJtFU9fW0ytL7CswqAVWzHANtx+UFjFOX8I4uIHluCBtWFF6kTOEuIAOoKDuxNcAMtYCXL0uJmWoRBq7RoUNc1LWCFzNLidlqgdmkB1XVNC1h+s7S4/UNk1O6HCFTXNS1gbc/S4kpawEVsGN5Ai4vUdUwLD9YMAS2ufo2mraXBvuhxemlQ7XmURDeuDxrfnvEg17zO3p1peifuAKjoI1sVOCkgKs4cMZznNDrmz243EEkEsu13zZqi8UM1pG11835TPXm/Na0NFd8rxz/MhORxOUQ1zAizpmU0fT9cLh8lxM5PT1jcbLfZeeAFPtSTOOXC5xOuPwGr1kvjlFrxHqhzJlDdkTglKYi3lW66YHX05pEDnS90zNVKB9rpbTcUwirun1+Bj9kaYGs1wDZidcOzuDEaGtetxmoEHQ51FqxhWRk+ibNM6qKa7B4+v0Bt0KzhhaMjxeVGmoGsrj2mwfpyw7MnS7XfhmrBxclnQwbRKdOuK06fyTnPJJPVDK6W1bbwzQc9SdN8BHcBhe5wMvq1NM33G9ShobTp/gddlLG1lk7BqjVRj1ZtcPqtnqqaV7TK5/b7AFXxE79hKfwLkUg2y2+e2RGx/Poe7+E/&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>
 <em>Task event flags</em> </center><p>Up to twenty(20) bit-flags are available per task and whenever the scheduler sees that one event-flag is set, the kernel will trigger the task execution.</p>
<dl class="section note"><dt>Note</dt><dd>The scheduler will put the task into a <code>READY</code> state when any of the available event-flags is set. The flags should be cleared by the application writer explicitly</dd></dl>
<h3><a class="anchor" id="q_eventflagsexample"></a>
Using the task Event-flags</h3>
<p>This example demonstrates the usage of Event-flags. The idle task will transmit data generated from another task, only when the required conditions are met, including two events from an ISR (A timer expiration and the change of a digital input) and when a new set of data is generated. The task that generates the data should wait until the idle task transmission is done to generate a new data set.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;QuarkTS.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceq_o_s.html">qOS</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*event flags application definitions */</span></div>
<div class="line"><span class="preprocessor">#define SWITCH_CHANGED   EVENT_FLAG(1)</span></div>
<div class="line"><span class="preprocessor">#define TIMER_EXPIRED    EVENT_FLAG(2)</span></div>
<div class="line"><span class="preprocessor">#define DATA_READY       EVENT_FLAG(3)</span></div>
<div class="line"><span class="preprocessor">#define DATA_TXMIT       EVENT_FLAG(4)</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classq_o_s_1_1task.html">task</a> TaskDataProducer;</div>
<div class="line">uint8_t dataToTransmit[ 10 ] = { 0 };</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt Timer0_ISR( <span class="keywordtype">void</span> ) {</div>
<div class="line">    clock::sysTick();</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt Timer1_ISR( <span class="keywordtype">void</span> ) {</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">eventFlagsModify</a>( TaskDataProducer, TIMER_EXPIRED, <span class="keyword">true</span> );</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> interrupt EXTI_ISR( <span class="keywordtype">void</span> ) {</div>
<div class="line">    <span class="keywordflow">if</span> ( EXTI_IsRisingEdge() ) {</div>
<div class="line">        <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">eventFlagsModify</a>( TaskDataProducer, SWITCH_CHANGED, <span class="keyword">true</span> );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> TaskDataProducer_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line">    <span class="keywordtype">bool</span> condition;</div>
<div class="line"> </div>
<div class="line">    condition = <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga56dc6d48d6f31ffb5cfe3b1d787af858">eventFlagsCheck</a>( TaskDataProducer, DATA_TXMIT, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line">    <span class="keywordflow">if</span> ( <span class="keyword">true</span> == condition) {</div>
<div class="line">        GenerateData( dataToTransmit );</div>
<div class="line">        <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">eventFlagsModify</a>( TaskDataProducer, DATA_READY, <span class="keyword">true</span> );</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga56dc6d48d6f31ffb5cfe3b1d787af858">eventFlagsCheck</a>( TaskDataProducer, DATA_READY | SWITCH_CHANGED | TIMER_EXPIRED, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">void</span> IdleTask_Callback( <a class="code hl_class" href="classq_o_s_1_1event__t.html">event_t</a> e ) {</div>
<div class="line"> </div>
<div class="line">    TransmitData( dataToTransmit );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">eventFlagsModify</a>( &amp;TaskDataProducer, DATA_TXMIT, <span class="keyword">true</span> );</div>
<div class="line">}</div>
<div class="line"><span class="comment">/*-----------------------------------------------------------------------*/</span></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">void</span> ) {</div>
<div class="line">    HardwareSetup();  <span class="comment">//hardware-specific code</span></div>
<div class="line">    <span class="comment">/* next line is used to set up hardware with specific code to fire</span></div>
<div class="line"><span class="comment">     * interrupts at 1ms - timer tick*/</span></div>
<div class="line">    Configure_Periodic_Timer0_Interrupt_1ms();</div>
<div class="line">    Configure_Periodic_Timer1_Interrupt_2s();</div>
<div class="line">    Configure_External_Interrupt();</div>
<div class="line">    <span class="comment">/* Idle task will be responsible to transmit the generate the data after</span></div>
<div class="line"><span class="comment">     * all conditions are met</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a8a1c57e7736a22fb8036bfa60b96915c">init</a>( <span class="keyword">nullptr</span>, IdleTask_Callback );</div>
<div class="line">    <span class="comment">/* The task will wait until data is transmitted to generate another set of</span></div>
<div class="line"><span class="comment">     * data */</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a882991afb9548674668aa51dbe694d6e">add</a>( TaskDataProducer, TaskDataProducer_Callback, core::HIGHEST_PRIORITY, <span class="stringliteral">&quot;DATAPRODUCER&quot;</span> );</div>
<div class="line">    <span class="comment">/* Set the flag DATA_TXMIT as the initial condition to allow the data</span></div>
<div class="line"><span class="comment">     * generation at startup</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">eventFlagsModify</a>( TaskDataProducer, DATA_TXMIT, <span class="keyword">true</span> );</div>
<div class="line">    <a class="code hl_variable" href="group__qtaskcreation.html#gaefc7088d1435e64e433d09541fae505c">os</a>.<a class="code hl_function" href="classq_o_s_1_1core.html#a30b4c1ac78976e2d289a710647300d5c">run</a>();</div>
<div class="line">    <span class="keywordflow">for</span> ( ;; ) {}</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__qeventflags_html_ga56dc6d48d6f31ffb5cfe3b1d787af858"><div class="ttname"><a href="group__qeventflags.html#ga56dc6d48d6f31ffb5cfe3b1d787af858">qOS::core::eventFlagsCheck</a></div><div class="ttdeci">bool eventFlagsCheck(task &amp;Task, taskFlag_t flagsToCheck, const bool clearOnExit=true, const bool checkForAll=false) noexcept</div><div class="ttdoc">Check for flags set to true inside the task Event-Flags.</div></div>
<div class="ttc" id="agroup__qeventflags_html_ga70fa8e4787737b3280f8d54b9d3c1937"><div class="ttname"><a href="group__qeventflags.html#ga70fa8e4787737b3280f8d54b9d3c1937">qOS::core::eventFlagsModify</a></div><div class="ttdeci">bool eventFlagsModify(task &amp;Task, const taskFlag_t tFlags, const bool action) noexcept</div><div class="ttdoc">Modify the EventFlags for the provided task.</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
